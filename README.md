# Minimal Forensics Experiment

## Notice

The difference from this, the minimal repository, to the full repository of the experiment, is that the minimal version can only use readily built Docker images.

## About

This repository is a playground and structure to conduct forensic experiments on a business application.

The focus on this setup is to evaluate artifacts (ie. log files) to proof that a data theft/breach in a company took place. Thus, heavy logging mechanisms are put in place, like an IDS. 

## Setup

To run the playground, ensure to have Docker and Docker Compose available.

 - Access to official Docker Registry is required
 - Hardcoded domains need to point to your local machine (e.g. set them in your `/etc/hosts` file)
   - `thi-app.test` -> Frontend for browser access
   - `backend.thi-app.test` -> Backend for API calls and access to user defined assets
   - `token-crawler.test` -> Backend for API calls of the simulated attacker
 - Run `docker-compose up` to start the playground (command might differ with newer Docker Compose)
   - Ensure that DB seeding took place, takes multiple restarts of Backend sometimes
 - Go to `http://thi-app.test` in a browser that does not enforce HTTPS
 - Either register a new account or login with default account:
   - E-Mail `jag3705@thi.de`
   - Password `Test123123`

## Reset Playground

To conduct multiple experiments and try different scenarios, there is a possibility to reset data and logs generated by the playground.

 - Run `analysis/reset.sh` to reset data and log files
 - Run `analysis/reset-data.sh` to reset user uploads and database
 - Run `analysis/reset-logs.sh` to reset logs by webserver, app, database and IDS

## Malicious Intent

The playground contains intentional mistakes, which can easily happen with beginner developers or general misconfiguration of underlying toolchains.

 - It is possible to upload avatars of students (ie. profile pictures), but the developers forgot to add a MIME Type check. Thus, it is possible to upload any kind of file. These files are obviously publicly accessible, as they are profile pictures to view in the frontend.
 - The description of a student features HTML markup. Thus, it is possible to add some markup, like bold fonts. Sadly, there is no stripping of dangerous tags in place. Thus, an attacker may upload HTML containing the `<script>` tag. This can be exploited to collect other student's API-Token from the Local Storage and POST it to an attacker's domain.